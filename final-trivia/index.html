<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Nebraskan Trivia Crack</title>
    <!-- 1. Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Import DN Fonts: Merriweather and Lato -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Merriweather:wght@700;900&display=swap" rel="stylesheet">
    
    <style>
        /* 2. Custom styles for the wheel, pointer, and confetti */
        body {
            /* Use DN's body font */
            font-family: 'Lato', sans-serif;
        }

        /* Helper class for DN's headline font */
        .font-merriweather {
            font-family: 'Merriweather', serif;
        }

        #wheel {
            width: 300px;
            height: 300px;
            /* Create the 4-quadrant look with a conic gradient - Red/White */
            background: conic-gradient(
                #b91c1c 0% 25%,   /* red-700 */
                #ffffff 25% 50%,  /* white */
                #b91c1c 50% 75%,  /* red-700 */
                #ffffff 75% 100% /* white */
            );
            /* This is the magic: a 5-second spin with a nice "ease-out" effect */
            transition: transform 5s cubic-bezier(0.25, 1, 0.5, 1);
        }

        .wheel-label {
            position: absolute;
            width: 50%;
            height: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.25rem; /* 20px */
            color: #000000; /* All black text */
            text-align: center;
            line-height: 1.2;
            padding: 4px;
        }

        /* Position and rotate each label to sit in its quadrant */
        .label-sports { top: 0; right: 0; transform: rotate(45deg) translateY(-25%); }
        .label-culture { bottom: 0; right: 0; transform: rotate(135deg) translateY(-25%); }
        .label-news { bottom: 0; left: 0; transform: rotate(225deg) translateY(-25%); }
        .label-opinion { top: 0; left: 0; transform: rotate(315deg) translateY(-25%); }

        #pointer {
            /* This creates the triangle pointer */
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 30px solid #1f2937; /* gray-800 */
            z-index: 10;
        }
        
        /* Confetti Animation */
        #confetti-container {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: 99;
        }
        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 10px;
            opacity: 0;
            /* The 'fall' animation is defined below */
            animation: fall 3s ease-in forwards;
        }

        @keyframes fall {
            0% { transform: translateY(-10vh) rotateZ(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotateZ(720deg); opacity: 0; }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-900 flex items-center justify-center min-h-screen p-4">

    <!-- 3. Main App Container -->
    <div id="app" class="w-full max-w-lg mx-auto text-center">
        
        <!-- ========================== -->
        <!--      WHEEL VIEW            -->
        <!-- ========================== -->
        <div id="wheel-view">
            <h1 class="text-3xl md:text-4xl font-bold mb-6 font-merriweather">Daily Nebraskan Trivia Crack</h1>
            <!-- Container for the pointer and wheel -->
            <div class="relative flex flex-col items-center justify-center mb-6">
                <!-- The pointer sits on top -->
                <div id="pointer" class="absolute -top-4"></div>
                <!-- The wheel itself -->
                <div id="wheel" class="rounded-full overflow-hidden border-8 border-white shadow-xl">
                    <div class="wheel-label label-sports">SPORTS</div>
                    <div class="wheel-label label-culture">CULTURE</div>
                    <div class="wheel-label label-news">NEWS</div>
                    <div class="wheel-label label-opinion">OPINION</div>
                </div>
            </div>
            <button id="spin-button" class="w-full bg-red-700 hover:bg-red-800 text-white font-bold py-4 px-6 rounded-lg text-2xl transition-all shadow-lg active:scale-95">
                SPIN THE WHEEL
            </button>
            
            <!-- Streak Counter -->
            <div class="mt-6">
                <h2 class="text-2xl font-bold">Correct Streak: <span id="streak-counter" class="text-red-700">0</span></h2>
                <p class="text-gray-600">(Goal: Get 3 in a row to win!)</p>
            </div>
        </div>

        <!-- ========================== -->
        <!--      QUESTION VIEW         -->
        <!-- ========================== -->
        <div id="question-view" class="hidden bg-white p-6 md:p-8 rounded-2xl shadow-2xl text-left">
            <!-- Category Title -->
            <h2 id="category-title" class="text-2xl font-bold mb-4 text-center font-merriweather text-red-700">
                <!-- e.g., Sports -->
            </h2>
            
            <!-- Question Text -->
            <p id="question-text" class="text-lg md:text-xl mb-6">
                <!-- e.g., Who won the big game? -->
            </p>
            
            <!-- Answer Options -->
            <div id="answer-options" class="space-y-3">
                <!-- Options will be buttons like this: -->
                <!-- <button class="answer-btn w-full text-left p-4 rounded-lg bg-gray-100 hover:bg-gray-200 transition-all">Option 1</button> -->
            </div>
            
            <!-- Feedback Area -->
            <div id="feedback" class="mt-4 text-center text-3xl font-bold">
                <!-- Feedback (e.g., 'X' or 'Correct!') goes here -->
            </div>
            
            <!-- Confetti container (only shown on correct) -->
            <div id="confetti-container"></div>
        </div>

        <!-- ========================== -->
        <!--    WIN STREAK MODAL        -->
        <!-- ========================== -->
        <div id="win-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50">
            <div class="bg-white p-8 rounded-2xl shadow-2xl text-center max-w-md w-full">
                <h2 class="text-3xl font-bold font-merriweather text-red-700 mb-4">You Won!</h2>
                <p class="text-lg mb-6">You got 3 in a row! You win a free subscription to the Daily Nebraskan! <br> (Secret: It's free already ðŸ˜‰)</p>
                <button id="close-modal-btn" class="w-full bg-red-700 hover:bg-red-800 text-white font-bold py-3 px-6 rounded-lg text-lg transition-all shadow-lg active:scale-95">
                    Keep Playing!
                </button>
            </div>
        </div>
    </div>

    <!-- 4. Main Game JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- 1. Get All Elements ---
            const wheel = document.getElementById('wheel');
            const spinButton = document.getElementById('spin-button');
            const wheelView = document.getElementById('wheel-view');
            const questionView = document.getElementById('question-view');
            
            const categoryTitle = document.getElementById('category-title');
            const questionText = document.getElementById('question-text');
            const answerOptions = document.getElementById('answer-options');
            const feedback = document.getElementById('feedback');
            
            const confettiContainer = document.getElementById('confetti-container');
            
            const streakCounter = document.getElementById('streak-counter');
            const winModal = document.getElementById('win-modal');
            const closeModalBtn = document.getElementById('close-modal-btn');

            // --- 2. Game State ---
            let isSpinning = false;
            let currentRotation = 0;
            let currentStreak = 0;
            // The categories, in order on the wheel (clockwise from top-right)
            const categories = ['Sports', 'Culture', 'News', 'Opinion'];
            
            // This object holds which questions have been asked for each category
            const questionTracker = {
                'Sports': [],
                'Culture': [],
                'News': [],
                'Opinion': []
            };

            // 4. All Questions
            const allQuestions = {
                'Sports': [
                    { q: "According to the article 'Nebraska-Wisconsin could decide the Big Ten Volleyball Championship,' what two teams were the only undefeated teams left in the country at the time of writing?", a: ["Nebraska and Penn State", "Nebraska and Texas", "Wisconsin and Texas", "Penn State and Wisconsin"], c: 1 },
                    { q: "In the same article, which Wisconsin setter suffered an injury on October 5th with no timeline to return?", a: ["Sarah Franklin", "Grace Lopez", "Izzy Starck", "Charlie Fuerbringer"], c: 3 },
                    { q: "What is the Nebraska volleyball team's hitting percentage, noted as the best in the Big Ten since 2019?", a: [".300", ".335", ".249", ".767"], c: 1 },
                    { q: "In the article 'Adrianoâ€™s career day fuels Nebraska sweep over Michigan State,' which player posted a career-high hitting percentage of .667?", a: ["Rebekah Allick", "Adriano", "Bergen Reilly", "Malayah Long"], c: 1 },
                    { q: "What is the average fan attendance for Nebraska volleyball home games inside the Bob Devaney Sports Center?", a: ["8,056", "8,600", "9,000", "7,900"], c: 1 },
                    { q: "According to the 'Report card' article, what grade was given to the Nebraska football team's rushing attack against Northwestern?", a: ["A", "B+", "A-", "B-"], c: 2 },
                    { q: "Who is the Big Ten's rushing leader who finished with 124 yards and two touchdowns against Northwestern?", a: ["Isaiah Mozee", "Anthony Grant", "Dylan Raiola", "Emmett Johnson"], c: 3 },
                    { q: "Which player sparked Nebraska's second-half momentum against Northwestern with a 95-yard kick return touchdown?", a: ["Kenneth Williams", "JD Spielman", "Nyziah Hunter", "Donovan Jones"], c: 0 },
                    { q: "What was the final score of the Nebraska vs. Northwestern football game?", a: ["21-14", "28-21", "21-21", "35-28"], c: 1 },
                    { q: "Against Michigan State, senior middle blocker Rebekah Allick delivered her mini ball to which Michigan State player, whom she knew from Lincoln?", a: ["Kennedy Martin", "Bergen Reilly", "Malayah Long", "Izzy Starck"], c: 2 }
                ],
                'Culture': [
                    { q: "What organization hosted the 'Night of the Living Drag Show' described in the article?", a: ["The Husker Pantry", "The UNL Gender and Sexuality Center", "Spectrum UNL", "The Jackie Gaughan Multicultural Center"], c: 2 },
                    { q: "All tips collected at the drag show went to which two funds?", a: ["The Husker Pantry and the UNL General Fund", "Spectrumâ€™s Leadership Conference Fund and the UNL Gender and Sexuality Centerâ€™s Support Fund", "The performers' travel fund and the Husker Pantry", "The Centennial Room rental fund and the performers' costume fund"], c: 1 },
                    { q: "Performer Flatch Hest (Kaitlyn Richards) brought out a sign with what two messages on it?", a: ["â€œProtect The Dollsâ€ and â€œTreat people with kindnessâ€", "â€œTrans rights are human rightsâ€ and â€œTreat people with kindnessâ€", "â€œEveryoneâ€™s welcomeâ€ and â€œProtect The Dollsâ€", "â€œTrans rights are human rightsâ€ and â€œAll Men Are Pigsâ€"], c: 1 },
                    { q: "In the 'Halloween costume slays and nays' column, which trio costume from 2022 does the author say is overdone?", a: ["Devil and Angel", "'Kiss, Marry, Kill'", "Labubus", "Ghosts, goblins, and werewolves"], c: 1 },
                    { q: "The author of the Halloween column criticizes college guys for wearing what 'boring and lazy' costume?", a: ["A lifeguard", "A jersey", "A vampire", "A ghost"], c: 1 },
                    { q: "What 'niche' costume did the author wear last year, referencing a specific movie scene?", a: ["Blair Waldorf from 'Gossip Girl'", "Carmy from 'The Bear'", "Priscilla Presley in a black and white polka dot set", "Sabrina Carpenter in the 'Tears' music video"], c: 2 },
                    { q: "What is the title of Olivia Dean's sophomore album, which is reviewed in the article?", a: ["'Messy'", "'The Art of Loving'", "'Nice To Each Other'", "'Man I Need'"], c: 1 },
                    { q: "Which song from the album alludes to 'Alice in Wonderland' by mentioning 'Chasing rabbits'?", a: ["'Lady Lady'", "'So Easy (To Fall In Love)'", "'Close Up'", "'Baby Steps'"], c: 2 },
                    { q: "Which track earned Olivia Dean her first career entry on the Billboard Hot 100?", a: ["'Nice To Each Other'", "'Man I Need'", "'Let Alone The One You Love'", "'Loud'"], c: 1 },
                    { q: "What is the central theme of the song 'Something Inbetween'?", a: ["Recovering from a breakup", "The need for space in a relationship", "Mourning a relationship that is over", "The joy of falling in love"], c: 1 }
                ],
                'News': [
                    { q: "According to the 'BREAKING' story, where did the fire at The Courtyards residence hall start?", a: ["In a dorm room on the first floor", "In the main lobby", "In a dryer in the third-floor laundry room", "In the building's cafeteria"], c: 2 },
                    { q: "What was the proposed budget cut from Chancellor Rodney Bennett that UNL professors are disputing?", a: ["$75 million", "$8.7 million", "$27.5 million", "$49 million"], c: 2 },
                    { q: "The UNL AAUP chapter cited a report stating that NUâ€™s 'AA' bond rating places it among the top ___ of higher education institutions in the U.S.", a: ["8%", "2%", "15%", "25%"], c: 0 },
                    { q: "A Flatwater Free Press report found that NU now spends more on what than it does on professors?", a: ["Student services", "Athletics", "Building maintenance", "Administrators"], c: 3 },
                    { q: "According to the report examining NU's spending shifts, instructional expenditures rose by 30.3% between 2016 and 2026, while administrative spending increased by how much?", a: ["7.6%", "31.7%", "53.1%", "74%"], c: 2 },
                    { q: "The College of Journalism and Mass Communications proposed merging which two majors?", a: ["Journalism and advertising/public relations", "Broadcasting and sports media", "Journalism and broadcasting", "Advertising and sports media"], c: 2 },
                    { q: "According to Dean Shari Veil, why was the merger proposed?", a: ["To reduce class sizes and offer more electives", "To align with national trends in journalism education", "To save money on faculty salaries", "To improve teaching/research metrics and increase enrollment"], c: 3 },
                    { q: "Which 40-year associate professor of Broadcasting applied for the Voluntary Separation Incentive Program (VSIP)?", a: ["Barney McCoy", "Shari Veil", "Rick Alloway", "Laurie Thomas Lee"], c: 2 },
                    { q: "Which two programs in the College of Journalism have grown in recent years, with 397 and 381 students, respectively?", a: ["Journalism and broadcasting", "Broadcasting and media production", "Advertising/public relations and sports media/communications", "Journalism and sports media/communications"], c: 2 },
                    { q: "What did UNL officials state was the reason for budget issues, despite the AAUP's report of 'strong financial health'?", a: ["A 7.8% decrease in full-time instructional employees", "The university's income has not kept pace with rising costs and inflation", "The S&P Global 'AA' bond rating was too low", "A 53.1% increase in administrative spending"], c: 1 }
                ],
                'Opinion': [
                    { q: "In 'OPINION: Gen Z is weird about age,' what 'syndrome' does the author suggest Gen Z may suffer from due to feeling behind in life?", a: ["Peter Pan syndrome", "Imposter syndrome", "HustleTok syndrome", "Soft life syndrome"], c: 0 },
                    { q: "According to the NBC News survey cited, what did men who voted for Donald Trump rank as their number one factor for personal success?", a: ["Having a fulfilling career", "Achieving financial independence", "Having children", "Marriage"], c: 2 },
                    { q: "The author defines the 'soft life' as a social media term that promotes what?", a: ["Getting married young and having children", "Achieving financial independence through 'HustleTok'", "Relaxation, low stress, and refraining from nightlife", "Curating a highlight reel of life to appear successful"], c: 2 },
                    { q: "What is the main argument of the opinion piece 'Student teachers should be paid for their labor'?", a: ["Student teachers should receive more experience to justify not being paid.", "Student teachers should be paid because they are contributing meaningful labor.", "Student teachers should not have to update portfolios or write lesson plans.", "Student teachers should only work part-time jobs while teaching."], c: 1 },
                    { q: "Besides being unpaid, what does the author point out as an unfair reality for student teachers?", a: ["They are actually paying tuition for credit hours to work.", "They are not allowed to interact with parents.", "They are required to work 12-hour days.", "They are not allowed to use the school's curriculum."], c: 0 },
                    { q: "According to the student teaching handbook, what are student teachers not required or guaranteed to receive, even while working 6-8 hours daily?", a: ["A curriculum", "Any kind of breaks", "A managing teacher", "Health insurance"], c: 1 },
                    { q: "In 'OPINION: Students or state,' what was the purpose of ASUN Senate Resolution #5 (SR #5)?", a: ["To demand the 'Cornhusker Clink' detention center be shut down.", "To release a statement against 'Cornhusker' being associated with the McCook ICE detention center.", "To sue the state for copyright infringement of the name 'Cornhuskers.'", "To request more funding from state legislators."], c: 1 },
                    { q: "What is the colloquial nickname for the McCook ICE detention center?", a: ["The 'Cornhusker Clink'", "The 'McCook Facility'", "The 'Nebraska Detainer'", "The 'ASUN Center'"], c: 0 },
                    { q: "What was the main concern expressed by senators like Reagan Choat who were worried about passing the resolution?", a: ["That the resolution was not strongly worded enough.", "That the nickname 'Cornhusker' was not a copyright violation.", "That there might be 'blowback' or negative reactions from UNL administration or state legislators.", "That the open forum for the student body was not long enough."], c: 2 },
                    { q: "What did Speaker Madie Beasley argue in her closing statement?", a: ["'Our duty is to the state government and the students equally.'", "'This resolution is the best way to protect the university's copyright.'", "'We must preserve our relationship with the Board of Governors.'", "'Our duty is not to the state government. It is, and always will be, to the students.'"], c: 3 }
                ]
            };

            // --- 3. Event Listeners ---
            spinButton.addEventListener('click', spinWheel);
            closeModalBtn.addEventListener('click', () => {
                winModal.classList.add('hidden');
                // Go back to the wheel view
                wheelView.classList.remove('hidden');
            });

            // --- 4. Game Functions ---

            /**
             * Spins the wheel to land on a random category
             */
            function spinWheel() {
                if (isSpinning) return;
                isSpinning = true;

                // Calculate a new random rotation
                // Add 5-10 full spins (360 * 5) to make it look good
                const newRotation = currentRotation + (360 * 8) + Math.random() * 360;
                
                // Apply the new rotation to the wheel
                wheel.style.transform = `rotate(${newRotation}deg)`;

                // 5-second spin
                setTimeout(() => {
                    isSpinning = false;
                    currentRotation = newRotation;
                    
                    // Figure out which category it landed on
                    const actualRotation = newRotation % 360;
                    
                    // Corrected logic for 4 segments (0-90, 90-180, 180-270, 270-360)
                    // The pointer is at the top (0 degrees).
                    // The "Sports" segment is from 0 to 90 degrees (top-right).
                    // We must account for the 45-degree offset of the labels
                    // A 360-degree spin lands back at 0.
                    // 0-90: Sports
                    // 90-180: Opinion (was Culture)
                    // 180-270: News
                    // 270-360: Culture (was Opinion)
                    
                    let category;
                    if (actualRotation >= 0 && actualRotation < 90) {
                        category = 'Sports';
                    } else if (actualRotation >= 90 && actualRotation < 180) {
                        category = 'Opinion'; // Corrected
                    } else if (actualRotation >= 180 && actualRotation < 270) {
                        category = 'News';
                    } else {
                        category = 'Culture'; // Corrected
                    }
                    
                    // Show the question for that category
                    presentQuestion(category);

                }, 5000); // Must match the CSS transition duration
            }

            /**
             * Finds a new question for the category and displays it
             */
            function presentQuestion(category) {
                // 1. Hide wheel, show question view
                wheelView.classList.add('hidden');
                questionView.classList.remove('hidden');

                // 2. Get the list of questions for this category
                const categoryQuestions = allQuestions[category];
                
                // 3. Find a question that hasn't been asked yet
                let questionIndex = -1;
                
                // If we've asked all questions, reset the tracker for this category
                if (questionTracker[category].length === categoryQuestions.length) {
                    questionTracker[category] = [];
                }

                // Pick a random index until we find one not in the tracker
                do {
                    questionIndex = Math.floor(Math.random() * categoryQuestions.length);
                } while (questionTracker[category].includes(questionIndex));
                
                // 4. Add this question to the tracker
                questionTracker[category].push(questionIndex);
                
                // 5. Get the question object
                const q = categoryQuestions[questionIndex];
                
                // 6. Show the question
                showQuestion(category, q);
            }

            /**
             * Populates the question view with the selected question
             */
            function showQuestion(category, q) {
                // 1. Lock answers
                let answerLocked = false;
                
                // 2. Clear out old question and answers
                questionText.textContent = '';
                answerOptions.innerHTML = '';
                feedback.innerHTML = '';
                confettiContainer.innerHTML = ''; // Clear old confetti
                feedback.className = "mt-4 text-center text-3xl font-bold"; // Reset feedback classes
                
                // 3. Set new content
                categoryTitle.textContent = category;
                questionText.textContent = q.q;

                // 4. Create answer buttons
                q.a.forEach((answer, index) => {
                    const button = document.createElement('button');
                    button.textContent = answer;
                    button.className = "answer-btn w-full text-left p-4 rounded-lg bg-gray-100 hover:bg-gray-200 transition-all font-medium";
                    
                    // 5. Add click listener for the answer
                    button.addEventListener('click', () => {
                        if (answerLocked) return;
                        answerLocked = true;
                        
                        // Check if correct
                        if (index === q.c) {
                            handleCorrectAnswer(button);
                        } else {
                            handleWrongAnswer(button);
                        }
                        
                        // After 2 seconds, go back to the wheel
                        setTimeout(() => {
                            wheelView.classList.remove('hidden');
                            questionView.classList.add('hidden');
                        }, 2000);
                    });
                    
                    answerOptions.appendChild(button);
                });
            }

            /**
             * Handles the logic for a correct answer
             */
            function handleCorrectAnswer(buttonEl) {
                // Style button
                buttonEl.classList.remove('bg-gray-100', 'hover:bg-gray-200');
                buttonEl.classList.add('bg-green-500', 'text-white');
                
                // Show confetti
                triggerConfetti();
                
                // Update streak
                currentStreak++;
                streakCounter.textContent = currentStreak;
                
                // Check for win
                if (currentStreak === 3) {
                    // Show win modal
                    setTimeout(() => { // Show modal slightly after confetti
                        winModal.classList.remove('hidden');
                        wheelView.classList.add('hidden'); // Hide wheel *behind* modal
                    }, 500);
                    // Reset streak
                    currentStreak = 0;
                    streakCounter.textContent = currentStreak;
                }
            }

            /**
             * Handles the logic for a wrong answer
             */
            function handleWrongAnswer(buttonEl) {
                // Style button
                buttonEl.classList.remove('bg-gray-100', 'hover:bg-gray-200');
                buttonEl.classList.add('bg-red-500', 'text-white');
                
                // Show 'X'
                feedback.textContent = 'âŒ';
                feedback.classList.add('text-red-500');
                
                // Highlight the correct answer
                const correctIndex = allQuestions[categoryTitle.textContent].find(q => q.q === questionText.textContent).c;
                const correctButton = answerOptions.children[correctIndex];
                correctButton.classList.remove('bg-gray-100', 'hover:bg-gray-200');
                correctButton.classList.add('bg-green-500', 'text-white');
                
                // Reset streak
                currentStreak = 0;
                streakCounter.textContent = currentStreak;
            }

            /**
             * Creates and animates confetti pieces
             */
            function triggerConfetti() {
                const colors = ['#b91c1c', '#f59e0b', '#10b981', '#3b82f6', '#6366f1'];
                for (let i = 0; i < 50; i++) {
                    const piece = document.createElement('div');
                    piece.className = 'confetti-piece';
                    piece.style.left = `${Math.random() * 100}%`;
                    piece.style.top = `${-10 + Math.random() * 10}%`;
                    piece.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    piece.style.transform = `rotate(${Math.random() * 360}deg)`;
                    piece.style.animationDelay = `${Math.random() * 3}s`;
                    confettiContainer.appendChild(piece);
                    
                    // Remove piece after animation
                    setTimeout(() => piece.remove(), 3000);
                }
            }
        });
    </script>
</body>
</html>

