<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Nebraskan Trivia Crack</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Daily Nebraskan Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Merriweather:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* Base styling */
        body {
            font-family: 'Lato', sans-serif;
            /* Red Gradient Background */
            background: linear-gradient(135deg, #c51d2c 0%, #a11622 100%);
        }
        
        /* DN Headline Font */
        .font-headline {
            font-family: 'Merriweather', serif;
            font-weight: 900;
        }

        /* DN Red Color */
        .bg-dn-red {
            background-color: #c51d2c;
        }
        .text-dn-red {
            color: #c51d2c;
        }

        /* --- Wheel Styles --- */
        #wheel-container {
            position: relative;
            width: 400px;
            height: 400px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #wheel {
            width: 100%;
            height: 100%;
            /* Corrected Conic Gradient Layout:
              0deg is at the TOP (12 o'clock).
              - Sports (top-right): 0deg to 90deg (WHITE)
              - News (bottom-right): 90deg to 180deg (BLACK)
              - Culture (bottom-left): 180deg to 270deg (WHITE)
              - Opinion (top-left): 270deg to 360deg (BLACK)
            */
            background: conic-gradient(
                #ffffff 0deg 90deg,     /* Sports (top-right, white) */
                #111827 90deg 180deg,    /* News (bottom-right, black) */
                #ffffff 180deg 270deg,   /* Culture (bottom-left, white) */
                #111827 270deg 360deg    /* Opinion (top-left, black) */
            );
            transition: transform 5s cubic-bezier(0.25, 1, 0.5, 1);
            border-radius: 9999px; /* full circle */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
            /* No gray border */
        }
        
        /* Red Pointer */
        #pointer {
            position: absolute;
            top: -22px; /* Positioned to point at the very top */
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 25px solid transparent;
            border-right: 25px solid transparent;
            border-top: 30px solid #dc2626; /* red-600 */
            z-index: 10;
        }
        
        /* Wheel Labels (now spin with the wheel) */
        .wheel-label {
            position: absolute;
            width: 50%;
            height: 50%;
            color: #dc2626; /* red-600 */
            font-family: 'Merriweather', serif;
            font-weight: 900;
            font-size: 1.25rem; /* text-xl */
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px; /* Add padding to keep text from edges */
            box-sizing: border-box; /* Include padding in width/height */
        }
        
        /* Sports: Top-Right (0-90 deg) */
        #label-sports {
            top: 0;
            right: 0;
            transform: rotate(45deg) translateY(-25%) scale(0.9);
        }
        
        /* Opinion: Top-Left (270-360 deg) */
        #label-opinion {
            top: 0;
            left: 0;
            transform: rotate(315deg) translateY(-25%) scale(0.9);
        }

        /* Culture: Bottom-Left (180-270 deg) */
        #label-culture {
            bottom: 0;
            left: 0;
            transform: rotate(225deg) translateY(-25%) scale(0.9);
        }
        
        /* News: Bottom-Right (90-180 deg) */
        #label-news {
            bottom: 0;
            right: 0;
            transform: rotate(135deg) translateY(-25%) scale(0.9);
        }

        /* --- Question View Styles --- */
        .answer-btn {
            transition: all 0.2s ease;
        }
        .answer-btn:hover {
            transform: scale(1.03);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        /* --- Confetti Styles --- */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            opacity: 0.7;
            animation: confetti-fall 3s ease-out forwards;
        }
        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
        
        /* --- Power-Up Button Styles --- */
        .powerup-btn {
            background-color: #c51d2c; /* DN Red */
            color: white;
            border: 2px solid white;
            padding: 0.5rem 1rem;
            border-radius: 9999px; /* full */
            font-family: 'Lato', sans-serif;
            font-weight: 700;
            transition: all 0.2s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }
        .powerup-btn:hover:not(:disabled) {
            background-color: #a11622;
            transform: translateY(-2px);
        }
        .powerup-btn:disabled {
            background-color: #6b7280; /* gray-500 */
            opacity: 0.5;
            cursor: not-allowed;
            border-color: #9ca3af; /* gray-400 */
        }

    </style>
</head>
<body class="text-white min-h-screen flex items-center justify-center p-4">

    <!-- Audio Context Container -->
    <div id="audio-context" class="hidden"></div>

    <!-- Main Game Container -->
    <div class="w-full max-w-2xl mx-auto">

        <!-- 1. Wheel View -->
        <div id="wheel-view" class="text-center">
            <h1 class="font-headline text-5xl mb-4 text-shadow-lg">Daily Nebraskan Trivia Crack</h1>
            
            <!-- Streak Counters -->
            <div class="bg-white text-gray-800 rounded-lg p-4 mb-6 shadow-xl max-w-md mx-auto">
                <div class="flex justify-around text-center">
                    <div>
                        <div class="font-bold text-lg text-dn-red">CURRENT STREAK</div>
                        <div id="current-streak" class="font-headline text-4xl">0</div>
                    </div>
                    <div>
                        <div class="font-bold text-lg text-dn-red">HIGHEST STREAK</div>
                        <div id="highest-streak" class="font-headline text-4xl">0</div>
                    </div>
                </div>
                <p class="text-gray-600 text-sm mt-3 font-semibold">
                    DN expert: win 3 games in a row. DN master: win 5 games in a row.
                </p>
            </div>

            <!-- Wheel Container -->
            <div id="wheel-container" class="mx-auto mb-6">
                <div id="pointer"></div>
                <div id="wheel">
                    <!-- Labels now spin WITH the wheel -->
                    <div id="label-sports" class="wheel-label">Sports</div>
                    <div id="label-opinion" class="wheel-label">Opinion</div>
                    <div id="label-culture" class="wheel-label">Culture</div>
                    <div id="label-news" class="wheel-label">News</div>
                </div>
            </div>

            <button id="spin-button" class="w-full max-w-xs mx-auto bg-dn-red text-white font-bold py-4 px-8 rounded-full shadow-lg text-2xl font-headline transform transition hover:scale-105 hover:bg-red-700">
                SPIN
            </button>
        </div>

        <!-- 2. Question View -->
        <div id="question-view" class="hidden">
            <div class="bg-white text-gray-800 rounded-lg shadow-2xl p-6 md:p-8">
                
                <!-- Power-Up Buttons -->
                <div class="flex justify-center space-x-4 mb-4">
                    <button id="powerup-5050" class="powerup-btn">50/50 (<span id="5050-count">1</span>)</button>
                    <button id="powerup-skip" class="powerup-btn">Skip (<span id="skip-count">1</span>)</button>
                </div>

                <div class="text-center mb-4">
                    <span id="question-category" class="font-headline text-3xl text-dn-red">Category</span>
                </div>
                <p id="question-text" class="text-xl font-semibold mb-6 min-h-[5rem]">
                    Question text will go here.
                </p>
                <div id="answers-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Answer buttons will be injected here -->
                </div>
            </div>
        </div>
        
        <!-- 3. Feedback Modals -->
        
        <!-- Correct Answer Modal -->
        <div id="correct-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
            <div class="bg-white text-green-700 rounded-lg shadow-2xl p-8 text-center max-w-sm w-full">
                <div class="text-8xl mb-4">üéâ</div>
                <h2 class="font-headline text-3xl mb-4">Correct!</h2>
                <button id="next-question-btn" class="w-full bg-green-600 text-white font-bold py-3 px-6 rounded-full text-lg transition hover:bg-green-700">
                    Spin Again
                </button>
            </div>
        </div>
        
        <!-- Wrong Answer Modal -->
        <div id="wrong-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
            <div class="bg-white text-red-600 rounded-lg shadow-2xl p-8 text-center max-w-sm w-full">
                <div class="text-8xl mb-4">‚ùå</div>
                <h2 class="font-headline text-3xl mb-4">Try Again!</h2>
                <p class="text-gray-700 text-lg mb-6">Streak reset to 0.</p>
                <button id="try-again-btn" class="w-full bg-red-600 text-white font-bold py-3 px-6 rounded-full text-lg transition hover:bg-red-700">
                    Spin Again
                </button>
            </div>
        </div>

        <!-- Prize Modal -->
        <div id="prize-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
            <div class="bg-white text-gray-800 rounded-lg shadow-2xl p-8 text-center max-w-md w-full relative overflow-hidden">
                <div id="confetti-container" class="absolute inset-0"></div>
                <div class="text-7xl mb-4">üèÜ</div>
                <h2 class="font-headline text-3xl mb-4 text-dn-red">YOU'RE A WINNER!</h2>
                <p id="prize-text" class="text-gray-700 text-lg mb-6">
                    You got 3 in a row and won a free subscription to the Daily Nebraskan! (secret: it's free already)
                </p>
                <button id="claim-prize-btn" class="w-full bg-dn-red text-white font-bold py-3 px-6 rounded-full text-lg transition hover:bg-red-700">
                    Keep Playing!
                </button>
            </div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- Audio Setup ---
            let audioContext;
            let tickSound, winSound, loseSound, prizeSound;

            // Initialize audio context on first user interaction
            function initAudio() {
                if (audioContext) return;
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // Tick sound (for wheel)
                tickSound = () => {
                    if (!audioContext) return;
                    const oscillator = audioContext.createOscillator();
                    const gain = audioContext.createGain();
                    oscillator.type = 'sine';
                    oscillator.frequency.setValueAtTime(880, audioContext.currentTime);
                    gain.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.1);
                    oscillator.connect(gain);
                    gain.connect(audioContext.destination);
                    oscillator.start();
                    oscillator.stop(audioContext.currentTime + 0.1);
                };

                // Win sound (correct answer) - Congratulatory Arpeggio
                winSound = () => {
                    if (!audioContext) return;
                    const notes = [523.25, 659.25, 783.99]; // C5, E5, G5
                    const gain = audioContext.createGain();
                    gain.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.5);
                    gain.connect(audioContext.destination);
                    
                    notes.forEach((freq, i) => {
                        const osc = audioContext.createOscillator();
                        osc.type = 'triangle';
                        osc.frequency.setValueAtTime(freq, audioContext.currentTime + i * 0.1);
                        osc.connect(gain);
                        osc.start(audioContext.currentTime + i * 0.1);
                        osc.stop(audioContext.currentTime + i * 0.1 + 0.1);
                    });
                };

                // Lose sound (wrong answer)
                loseSound = () => {
                    if (!audioContext) return;
                    const oscillator = audioContext.createOscillator();
                    oscillator.type = 'square';
                    oscillator.frequency.setValueAtTime(164.81, audioContext.currentTime); // E3
                    oscillator.frequency.linearRampToValueAtTime(130.81, audioContext.currentTime + 0.2); // C3
                    const gain = audioContext.createGain();
                    gain.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.3);
                    oscillator.connect(gain);
                    gain.connect(audioContext.destination);
                    oscillator.start();
                    oscillator.stop(audioContext.currentTime + 0.3);
                };
                
                // Prize sound (3-in-a-row)
                prizeSound = () => {
                    if (!audioContext) return;
                    const notes = [523.25, 659.25, 783.99, 1046.50]; // C5, E5, G5, C6
                    const gain = audioContext.createGain();
                    gain.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.5);
                    gain.connect(audioContext.destination);
                    
                    notes.forEach((freq, i) => {
                        const osc = audioContext.createOscillator();
                        osc.type = 'triangle';
                        osc.frequency.setValueAtTime(freq, audioContext.currentTime + i * 0.1);
                        osc.connect(gain);
                        osc.start(audioContext.currentTime + i * 0.1);
                        osc.stop(audioContext.currentTime + i * 0.1 + 0.1);
                    });
                };
            }
            
            // First interaction listener
            document.body.addEventListener('click', initAudio, { once: true });
            document.body.addEventListener('touchend', initAudio, { once: true });


            // --- Game State ---
            let currentStreak = 0;
            let highestStreak = 0;
            let currentRotation = 0;
            let currentQuestion = null;
            let powerups = {
                5050: 1,
                skip: 1
            };

            // --- Question Bank ---
            const questions = {
                Sports: [
                    { q: 'According to the article "Nebraska-Wisconsin could decide the Big Ten Volleyball Championship," what two teams were the only undefeated teams left in the country at the time of writing?', a: ['Nebraska and Texas', 'Nebraska and Penn State', 'Wisconsin and Texas', 'Penn State and Wisconsin'] },
                    { q: 'In the same article, which Wisconsin setter suffered an injury on October 5th with no timeline to return?', a: ['Charlie Fuerbringer', 'Sarah Franklin', 'Grace Lopez', 'Izzy Starck'] },
                    { q: "What is the Nebraska volleyball team's hitting percentage, noted as the best in the Big Ten since 2019?", a: ['.335', '.300', '.249', '.767'] },
                    { q: 'In the article "Adriano‚Äôs career day fuels Nebraska sweep over Michigan State," which player posted a career-high hitting percentage of .667?', a: ['Adriano', 'Rebekah Allick', 'Bergen Reilly', 'Malayah Long'] },
                    { q: 'What is the average fan attendance for Nebraska volleyball home games inside the Bob Devaney Sports Center?', a: ['8,600', '8,056', '9,000', '7,900'] },
                    { q: 'According to the "Report card" article, what grade was given to the Nebraska football team\'s rushing attack against Northwestern?', a: ['A-', 'A', 'B+', 'B-'] },
                    { q: "Who is the Big Ten's rushing leader who finished with 124 yards and two touchdowns against Northwestern?", a: ['Emmett Johnson', 'Isaiah Mozee', 'Anthony Grant', 'Dylan Raiola'] },
                    { q: "Which player sparked Nebraska's second-half momentum against Northwestern with a 95-yard kick return touchdown?", a: ['Kenneth Williams', 'JD Spielman', 'Nyziah Hunter', 'Donovan Jones'] },
                    { q: 'What was the final score of the Nebraska vs. Northwestern football game?', a: ['28-21', '21-14', '21-21', '35-28'] },
                    { q: 'Against Michigan State, senior middle blocker Rebekah Allick delivered her mini ball to which Michigan State player, whom she knew from Lincoln?', a: ['Malayah Long', 'Kennedy Martin', 'Bergen Reilly', 'Izzy Starck'] }
                ],
                Culture: [
                    { q: 'What organization hosted the "Night of the Living Drag Show" described in the article?', a: ['Spectrum UNL', 'The Husker Pantry', 'The UNL Gender and Sexuality Center', 'The Jackie Gaughan Multicultural Center'] },
                    { q: 'All tips collected at the drag show went to which two funds?', a: ['Spectrum‚Äôs Leadership Conference Fund and the UNL Gender and Sexuality Center‚Äôs Support Fund', 'The Husker Pantry and the UNL General Fund', 'The performers\' travel fund and the Husker Pantry', 'The Centennial Room rental fund and the performers\' costume fund'] },
                    { q: 'Performer Flatch Hest (Kaitlyn Richards) brought out a sign with what two messages on it?', a: ['‚ÄúTrans rights are human rights‚Äù and ‚ÄúTreat people with kindness‚Äù', '‚ÄúProtect The Dolls‚Äù and ‚ÄúTreat people with kindness‚Äù', '‚ÄúEveryone‚Äôs welcome‚Äù and ‚ÄúProtect The Dolls‚Äù', '‚ÄúTrans rights are human rights‚Äù and ‚ÄúAll Men Are Pigs‚Äù'] },
                    { q: 'In the "Halloween costume slays and nays" column, which trio costume from 2022 does the author say is overdone?', a: ['"Kiss, Marry, Kill"', 'Devil and Angel', 'Labubus', 'Ghosts, goblins, and werewolves'] },
                    { q: 'The author of the Halloween column criticizes college guys for wearing what "boring and lazy" costume?', a: ['A jersey', 'A lifeguard', 'A vampire', 'A ghost'] },
                    { q: 'What "niche" costume did the author wear last year, referencing a specific movie scene?', a: ['Priscilla Presley in a black and white polka dot set', 'Blair Waldorf from "Gossip Girl"', 'Carmy from "The Bear"', 'Sabrina Carpenter in the "Tears" music video'] },
                    { q: 'What is the title of Olivia Dean\'s sophomore album, which is reviewed in the article?', a: ['"The Art of Loving"', '"Messy"', '"Nice To Each Other"', '"Man I Need"'] },
                    { q: 'Which song from the album alludes to "Alice in Wonderland" by mentioning "Chasing rabbits"?', a: ['"Close Up"', '"Lady Lady"', '"So Easy (To Fall In Love)"', '"Baby Steps"'] },
                    { q: 'Which track earned Olivia Dean her first career entry on the Billboard Hot 100?', a: ['"Man I Need"', '"Nice To Each Other"', '"Let Alone The One You Love"', '"Loud"'] },
                    { q: 'What is the central theme of the song "Something Inbetween"?', a: ['The need for space in a relationship', 'Recovering from a breakup', 'Mourning a relationship that is over', 'The joy of falling in love'] }
                ],
                News: [
                    { q: 'According to the "BREAKING" story, where did the fire at The Courtyards residence hall start?', a: ['In a dryer in the third-floor laundry room', 'In a dorm room on the first floor', 'In the main lobby', 'In the building\'s cafeteria'] },
                    { q: 'What was the proposed budget cut from Chancellor Rodney Bennett that UNL professors are disputing?', a: ['$27.5 million', '$75 million', '$8.7 million', '$49 million'] },
                    { q: 'The UNL AAUP chapter cited a report stating that NU‚Äôs \'AA\' bond rating places it among the top ___ of higher education institutions in the U.S.', a: ['8%', '2%', '15%', '25%'] },
                    { q: 'A Flatwater Free Press report found that NU now spends more on what than it does on professors?', a: ['Administrators', 'Student services', 'Athletics', 'Building maintenance'] },
                    { q: 'According to the report examining NU\'s spending shifts, instructional expenditures rose by 30.3% between 2016 and 2026, while administrative spending increased by how much?', a: ['53.1%', '7.6%', '31.7%', '74%'] },
                    { q: 'The College of Journalism and Mass Communications proposed merging which two majors?', a: ['Journalism and broadcasting', 'Journalism and advertising/public relations', 'Broadcasting and sports media', 'Advertising and sports media'] },
                    { q: 'According to Dean Shari Veil, why was the merger proposed?', a: ['To improve teaching/research metrics and increase enrollment', 'To reduce class sizes and offer more electives', 'To align with national trends in journalism education', 'To save money on faculty salaries'] },
                    { q: 'Which 40-year associate professor of Broadcasting applied for the Voluntary Separation Incentive Program (VSIP)?', a: ['Rick Alloway', 'Barney McCoy', 'Shari Veil', 'Laurie Thomas Lee'] },
                    { q: 'Which two programs in the College ofJjournalism have grown in recent years, with 397 and 381 students, respectively?', a: ['Advertising/public relations and sports media/communications', 'Journalism and broadcasting', 'Broadcasting and media production', 'Journalism and sports media/communications'] },
                    { q: 'What did UNL officials state was the reason for budget issues, despite the AAUP\'s report of "strong financial health"?', a: ['The university\'s income has not kept pace with rising costs and inflation', 'A 7.8% decrease in full-time instructional employees', 'The S&P Global \'AA\' bond rating was too low', 'A 53.1% increase in administrative spending'] }
                ],
                Opinion: [
                    { q: 'In "OPINION: Gen Z is weird about age," what "syndrome" does the author suggest Gen Z may suffer from due to feeling behind in life?', a: ['Peter Pan syndrome', 'Imposter syndrome', 'HustleTok syndrome', 'Soft life syndrome'] },
                    { q: 'According to the NBC News survey cited, what did men who voted for Donald Trump rank as their number one factor for personal success?', a: ['Having children', 'Having a fulfilling career', 'Achieving financial independence', 'Marriage'] },
                    { q: 'The author defines the "soft life" as a social media term that promotes what?', a: ['Relaxation, low stress, and refraining from nightlife', 'Getting married young and having children', 'Achieving financial independence through "HustleTok"', 'Curating a highlight reel of life to appear successful'] },
                    { q: 'What is the main argument of the opinion piece "Student teachers should be paid for their labor"?', a: ['Student teachers should be paid because they are contributing meaningful labor.', 'Student teachers should receive more experience to justify not being paid.', 'Student teachers should not have to update portfolios or write lesson plans.', 'Student teachers should only work part-time jobs while teaching.'] },
                    { q: 'Besides being unpaid, what does the author point out as an unfair reality for student teachers?', a: ['They are actually paying tuition for credit hours to work.', 'They are not allowed to interact with parents.', 'They are required to work 12-hour days.', 'They are not allowed to use the school\'s curriculum.'] },
                    { q: 'According to the student teaching handbook, what are student teachers not required or guaranteed to receive, even while working 6-8 hours daily?', a: ['Any kind of breaks', 'A curriculum', 'A managing teacher', 'Health insurance'] },
                    { q: 'In "OPINION: Students or state," what was the purpose of ASUN Senate Resolution #5 (SR #5)?', a: ['To release a statement against "Cornhusker" being associated with the McCook ICE detention center.', 'To demand the "Cornhusker Clink" detention center be shut down.', 'To sue the. state for copyright infringement of the name "Cornhuskers."', 'To request more funding from state legislators.'] },
                    { q: 'What is the colloquial nickname for the McCKook ICE detention center?', a: ['The "Cornhusker Clink"', 'The "McCook Facility"', 'The "Nebraska Detainer"', 'The "ASUN Center"'] },
                    { q: 'What was the main concern expressed by senators like Reagan Choat who were worried about passing the resolution?', a: ['That there might be "blowback" or negative reactions from UNL administration or state legislators.', 'That the resolution was not strongly worded enough.', 'That the nickname "Cornhusker" was not a copyright violation.', 'That the open forum for the student body was not long enough.'] },
                    { q: 'What did Speaker Madie Beasley argue in her closing statement?', a: ['"Our duty is not to the state government. It is, and always will be, to the students."', '"Our duty is to the state government and the students equally."', '"This resolution is the best way to protect the university\'s copyright."', '"We must preserve our relationship with the Board of Governors."'] }
                ]
            };
            
            // --- Category definitions for the wheel ---
            // ** THIS IS THE CRITICAL FIX **
            // This array MUST match the visual layout in the CSS, clockwise from 0 degrees.
            // 0-90 (Top-Right): Sports
            // 90-180 (Bottom-Right): News
            // 180-270 (Bottom-Left): Culture
            // 270-360 (Top-Left): Opinion
            const wheelCategories = ['Sports', 'News', 'Culture', 'Opinion'];

            // --- DOM Elements ---
            const wheelView = document.getElementById('wheel-view');
            const questionView = document.getElementById('question-view');
            const wheel = document.getElementById('wheel');
            const spinButton = document.getElementById('spin-button');
            
            const currentStreakDisplay = document.getElementById('current-streak');
            const highestStreakDisplay = document.getElementById('highest-streak');
            
            const questionCategory = document.getElementById('question-category');
            const questionText = document.getElementById('question-text');
            const answersGrid = document.getElementById('answers-grid');
            
            const correctModal = document.getElementById('correct-modal');
            const wrongModal = document.getElementById('wrong-modal');
            const prizeModal = document.getElementById('prize-modal');
            const prizeText = document.getElementById('prize-text');
            
            const nextQuestionBtn = document.getElementById('next-question-btn');
            const tryAgainBtn = document.getElementById('try-again-btn');
            const claimPrizeBtn = document.getElementById('claim-prize-btn');

            const powerup5050Btn = document.getElementById('powerup-5050');
            const powerupSkipBtn = document.getElementById('powerup-skip');
            const count5050 = document.getElementById('5050-count');
            const countSkip = document.getElementById('skip-count');

            // --- Event Listeners ---
            spinButton.addEventListener('click', spinWheel);
            nextQuestionBtn.addEventListener('click', showWheelView);
            tryAgainBtn.addEventListener('click', showWheelView);
            claimPrizeBtn.addEventListener('click', () => {
                prizeModal.classList.add('hidden');
                showWheelView();
            });
            powerup5050Btn.addEventListener('click', use5050);
            powerupSkipBtn.addEventListener('click', useSkip);

            // --- Game Logic ---

            function spinWheel() {
                initAudio(); // Ensure audio is ready
                spinButton.disabled = true;
                
                // Calculate new rotation
                // Spin at least 5 times. Add a random spin amount.
                const spinDegrees = Math.floor(Math.random() * 360) + 360 * 5; 
                currentRotation += spinDegrees;
                
                wheel.style.transform = `rotate(${currentRotation}deg)`;
                
                // Play tick sound during spin
                const spinDuration = 5000; // 5 seconds (matches CSS)
                const ticks = 40; // Number of ticks
                for (let i = 0; i < ticks; i++) {
                    setTimeout(tickSound, (i * spinDuration) / ticks);
                }
                
                // Determine result after spin
                setTimeout(() => {
                    // The pointer is at 0 (top).
                    // We need to find what degree the wheel stopped at, relative to its start.
                    // The "currentRotation" is how much it spun *from* its last position.
                    // We need the *final* angle, modulo 360.
                    const finalAngle = currentRotation % 360;

                    // The wheel is laid out in 90-degree quadrants.
                    // 0-90: Sports
                    // 90-180: News
                    // 180-270: Culture
                    // 270-360: Opinion
                    
                    // The pointer is at the top (0 degrees). A rotation of X degrees
                    // moves the X-degree mark to the top.
                    // We want the category that *lands* at 0.
                    // So we check which segment contains 360 - finalAngle.
                    
                    const landingAngle = (360 - finalAngle) % 360;

                    // Find which quadrant the landingAngle falls into
                    const categoryIndex = Math.floor(landingAngle / 90);
                    const category = wheelCategories[categoryIndex];
                    
                    presentQuestion(category);
                    spinButton.disabled = false;
                }, 5000); // Wait for CSS transition to end
            }

            function presentQuestion(category) {
                // Get a random question from the category
                const categoryQuestions = questions[category];
                if (!categoryQuestions || categoryQuestions.length === 0) {
                    console.error(`No questions found for category: ${category}`);
                    // Handle this error, e.g., spin again
                    showWheelView();
                    return;
                }
                
                const qIndex = Math.floor(Math.random() * categoryQuestions.length);
                currentQuestion = categoryQuestions[qIndex];
                
                // Remove this question from the bank to avoid repeats (optional, but good)
                // For a real game, you'd want to handle running out of questions
                // questions[category].splice(qIndex, 1); 

                questionCategory.textContent = category;
                questionText.textContent = currentQuestion.q;
                
                // Shuffle answers
                const answers = [...currentQuestion.a].sort(() => Math.random() - 0.5);
                
                answersGrid.innerHTML = '';
                answers.forEach(answer => {
                    const button = document.createElement('button');
                    button.textContent = answer;
                    button.classList.add('answer-btn', 'w-full', 'bg-gray-100', 'text-gray-700', 'font-semibold', 'p-4', 'rounded-lg', 'shadow', 'text-left');
                    button.addEventListener('click', () => checkAnswer(answer, button));
                    answersGrid.appendChild(button);
                });
                
                // Update and show powerup buttons
                updatePowerupButtons();
                
                wheelView.classList.add('hidden');
                questionView.classList.remove('hidden');
            }
            
            function checkAnswer(answer, button) {
                // Disable all buttons after an answer is chosen
                Array.from(answersGrid.children).forEach(btn => btn.disabled = true);

                if (answer === currentQuestion.a[0]) {
                    // Correct
                    button.classList.remove('bg-gray-100');
                    button.classList.add('bg-green-500', 'text-white');
                    winSound();
                    
                    setTimeout(() => {
                        handleCorrectAnswer();
                    }, 1000);

                } else {
                    // Wrong
                    button.classList.remove('bg-gray-100');
                    button.classList.add('bg-red-500', 'text-white');
                    loseSound();
                    
                    // Highlight the correct answer
                    Array.from(answersGrid.children).forEach(btn => {
                        if (btn.textContent === currentQuestion.a[0]) {
                            btn.classList.remove('bg-gray-100');
                            btn.classList.add('bg-green-500', 'text-white');
                        }
                    });

                    setTimeout(() => {
                        handleWrongAnswer();
                    }, 2000);
                }
            }

            function handleCorrectAnswer() {
                currentStreak++;
                if (currentStreak > highestStreak) {
                    highestStreak = currentStreak;
                }
                updateStreakDisplays();

                if (currentStreak === 5) {
                    prizeText.textContent = "5-IN-A-ROW! You're a DN Master! You've definitely earned that free subscription. (secret: it's still free)";
                    prizeModal.classList.remove('hidden');
                    launchConfetti();
                    prizeSound();
                } else if (currentStreak === 3) {
                    prizeText.textContent = "You got 3 in a row and won a free subscription to the Daily Nebraskan! (secret: it's free already)";
                    prizeModal.classList.remove('hidden');
                    launchConfetti();
                    prizeSound();
                } else {
                    correctModal.classList.remove('hidden');
                }
                
                questionView.classList.add('hidden');
            }

            function handleWrongAnswer() {
                currentStreak = 0;
                updateStreakDisplays();
                wrongModal.classList.remove('hidden');
                questionView.classList.add('hidden');
            }

            function showWheelView() {
                correctModal.classList.add('hidden');
                wrongModal.classList.add('hidden');
                wheelView.classList.remove('hidden');
            }

            function updateStreakDisplays() {
                currentStreakDisplay.textContent = currentStreak;
                highestStreakDisplay.textContent = highestStreak;
            }
            
            function updatePowerupButtons() {
                count5050.textContent = powerups[5050];
                countSkip.textContent = powerups.skip;
                powerup5050Btn.disabled = powerups[5050] <= 0;
                powerupSkipBtn.disabled = powerups.skip <= 0;
            }

            function use5050() {
                if (powerups[5050] <= 0) return;
                powerups[5050]--;
                updatePowerupButtons();
                
                const correctAnswer = currentQuestion.a[0];
                let wrongAnswers = Array.from(answersGrid.children).filter(btn => btn.textContent !== correctAnswer);
                
                // Shuffle wrong answers and disable two of them
                wrongAnswers.sort(() => Math.random() - 0.5);
                wrongAnswers[0].disabled = true;
                wrongAnswers[0].classList.add('opacity-30');
                wrongAnswers[1].disabled = true;
                wrongAnswers[1].classList.add('opacity-30');
            }
            
            function useSkip() {
                if (powerups.skip <= 0) return;
                powerups.skip--;
                updatePowerupButtons();
                
                // Don't count as right or wrong, just go back to the wheel
                showWheelView();
                questionView.classList.add('hidden');
            }

            // --- Confetti ---
            function launchConfetti() {
                const container = document.getElementById('confetti-container');
                container.innerHTML = ''; // Clear old confetti
                const colors = ['#c51d2c', '#ffffff', '#111827', '#fbbf24'];
                
                for (let i = 0; i < 50; i++) {
                    const confetti = document.createElement('div');
                    confetti.classList.add('confetti');
                    confetti.style.left = `${Math.random() * 100}%`;
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = `${Math.random() * 2}s`;
                    confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                    container.appendChild(confetti);
                }
            }

        });
    </script>
</body>
</html>

